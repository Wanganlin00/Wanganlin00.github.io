---
title: "模板"
execute:
  warning: false
  
toc: true
toc-depth: 5
number-sections: true
number-depth: 4

code-fold: show
code-link: true
code-tools: true

knitr:
  opts_chunk: 
    comment: "#>" 
    collapse: TRUE
crossref: 
  fig-title: 图
  fig-prefix: 图
  tbl-title: 表
  tbl-prefix: 表
  eq-title: 式
  eq-prefix: 式
  def-title: 定义
  def-prefix: 定义
  lem-title: 引理
  lem-prefix: 引理
  sec-prefix: 章节
  
fig-width: 4
fig-asp: 0.618

format: html
editor: visual
---

# Qmarkdown format

|                                       |                                                         |
|---------------------------|---------------------------------------------|
| 输出                                  | 语法                                                    |
| `code`                                | \` code \`                                              |
| **粗体**                              | `**粗体**`                                              |
| *斜体*                                | `*斜体*`                                                |
| [下横线]{.underline}                  | `[下横线]{.underline}`                                  |
| ~~删除线~~                            | `~~删除线~~`                                            |
| 上标X^2^                              | `X^2^`                                                  |
| 下标 X~1~                             | `X~1~`                                                  |
| [SAMALL small caps]{.smallcaps}       | 与小写字母同等高度的大写字母 `[small caps]{.smallcaps}` |
| <https://r4ds.hadley.nz/>             | [`https://r4ds.hadley.nz/`](https://r4ds.hadley.nz/)    |
| [quarto](https://quarto.org)          | `[quarto](https://quarto.org)`                          |
| ![data science](){alt="data science"} | `![data science]()`                                     |

## 手动更新R {#sec-uptate}

```{r}
oldid <- installed.packages() |> as_tibble()
write_csv(oldid,file = "Packages.csv")
```

```{r}
pack <- read_csv(file = "Packages.csv")
newid <- installed.packages() |> as_tibble()
diff <- setdiff(oldid[,1],newid[,1])

for (i in diff) {
    install.packages(i)
}
```

### tinyTex

```{r}
#| eval: false
install.packages("tinytex")
tinytex::install_tinytex()
tinytex:::install_prebuilt('~/Downloads/TinyTeX-1-v2024.04.zip')

tinytex::tlmgr_repo('http://mirrors.tuna.tsinghua.edu.cn/CTAN/')
```

<https://github.com/rstudio/tinytex-releases/releases>

```{r}
#| eval: false

tlmgr_search('framed.sty')  # 搜索包含 framed.sty 文件的 LaTeX 包
tlmgr_install('framed')     # 安装 framed 包
tinytex::reinstall_tinytex(repository = "illinois") # 更新 tinytex
tlmgr_update()              # 更新 TeX Live
```

## 图

```{r}
#| label: fig-plot
#| fig-cap: "plot 点-线"
#| fig-subcap:
#|   - "点"
#|   - "线"
#| layout-ncol: 2
#| column: page-right

plot(1:25,1:25,pch=c(1:25))
plot(1:25,c(1:25)^2,type="b",pch=c(1:25))
```

如左图 @fig-plot-1 所示，点有25种不同的形状，

右图 @fig-plot-2 所示。

## 流程图

```{mermaid}
flowchart LR
  A[Hard edge] --> B(Round edge)
  B --> C{Decision}
  C --> D[Result one]
  C --> E[Result two]
```

#### 代码块

```{r}
#| code-summary: "tidyverse Packages"
library(tidyverse)
```

引用章节： @sec-eda and @sec-formula

##### EDA {#sec-eda}

引用图片 @fig-histogram shows two histograms displaying the distributions of `price` and `area` individually.

```{r}
#| label: fig-histogram
#| fig-cap: "Histograms of mpg"
#| fig-subcap:
#|   - "Histogram of `cty`s"
#|   - "Histogram of `hwy`s" 
#| fig-alt: "What's this."
#| layout-ncol: 2
#| column: page-right

ggplot(mpg, aes(cty)) +
  geom_histogram() +
  labs(title = "Histogram of cty")

ggplot(mpg, aes(x =hwy)) +
  geom_histogram() +
  labs(title = "Histogram of hwy")
```

## 表格

@tbl-stats displays basic summary statistics for these two variables.

```{r}
#| label: tbl-stats
#| tbl-cap: "Table Summary statistics "

mpg %>%
  summarise(
    mean_displ=mean(displ),
    mean_hwy=mean(hwy),
    mean_cty=mean(cty),
    .by = cyl
    ) %>%
  knitr::kable(digits = c(0, 0, 0, 0, 2))
```

## 公式 {#sec-formula}

Black-Scholes (@eq-black-scholes) is a mathematical model that seeks to explain the behavior of financial derivatives, most commonly options:

$$ \frac{\partial \mathrm C}{ \partial \mathrm t } + \frac{1}{2}\sigma^{2} \mathrm S^{2} \frac{\partial^{2} \mathrm C}{\partial \mathrm C^2}   + \mathrm r \mathrm S \frac{\partial \mathrm C}{\partial \mathrm S}\ =   \mathrm r \mathrm C  $$ {#eq-black-scholes}

We can fit a simple linear regression model of the form shown in @eq-slr.

$$
price = \hat{\beta}_0 + \hat{\beta}_1 \times area + \epsilon
$$ {#eq-slr}

::: callout-note
This is a pretty incomplete analysis, but hopefully the document provides a good overview of some of the authoring features of Quarto!
:::

### 三段论

i.  所有S都是P。

ii. 所有P都是Q。

iii. 所有S都是Q。

全球变暖

:   由于受到温室效应的影响，地球大气层总体温度逐渐上升。

lemma

:   三角形的内角和等于180°。
